{% extends "base.html" %}

{% block title %}Newsletter Generator - Newsletter Hub{% endblock %}

{% block content %}
<div class="space-y-8">
    <!-- Header Section -->
    <div class="bg-white rounded-lg shadow-sm p-8 border border-slate-200">
        <h2 class="text-3xl font-bold text-slate-900 mb-2">Generate Newsletter</h2>
        <p class="text-slate-600 mb-6">Fetch and summarize the latest AI news articles from multiple sources</p>
        
        <button 
            hx-post="/run"
            hx-target="#results"
            hx-swap="innerHTML swap:1s"
            class="inline-flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"
            id="generateBtn">
            <i class="fas fa-bolt"></i>
            <span>Generate Newsletter</span>
        </button>
    </div>
    
    <!-- Loading Indicator -->
    <div id="loading" class="htmx-indicator hidden animate-pulse">
        <div class="bg-white rounded-lg shadow-sm p-8 border border-slate-200">
            <div class="flex items-center justify-center space-x-3">
                <div class="w-3 h-3 bg-blue-600 rounded-full animate-bounce"></div>
                <div class="w-3 h-3 bg-blue-600 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                <div class="w-3 h-3 bg-blue-600 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                <span class="text-slate-600 font-medium ml-2">Fetching and summarizing articles...</span>
            </div>
        </div>
    </div>
    
    <!-- Results Section -->
    <div id="results" class="space-y-4"></div>
</div>

<script>
    // Show loading indicator when request starts
    document.getElementById('generateBtn').addEventListener('htmx:request', function() {
        document.getElementById('loading').classList.remove('hidden');
    });
    
    // Hide loading indicator when response completes
    document.body.addEventListener('htmx:afterSwap', function() {
        document.getElementById('loading').classList.add('hidden');
    });
</script>
{% endblock %}
